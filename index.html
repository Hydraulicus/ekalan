<!DOCTYPE HTML>
<!-- <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> -->
<!-- <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"> -->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta name="author" content="Alexei Zababurin" />
  <meta name="description" content="Frontend developer. Personal website.CSS. CSS3. HTML5. JS. SVG. animation. CSS-animation. SVG-animation. Vector. scroll"/>
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta property="og:title" content="EKALAN by Alexei Zababurin"/>
  <meta property="og:site_name" content="EKALAN by Alexei Zababurin"/>
  <meta property="og:description" content="EKALAN by Alexei Zababurin"/>
  <title>EKALAN by Alexei Zababurin</title>
  <!-- CSS  -->
  <!-- <link href='http://fonts.googleapis.com/css?family=Playfair+Display' rel='stylesheet' type='text/css'> -->
  <link href="css/flex.css" type="text/css" rel="stylesheet" media="screen,projection"/>
  <!-- <link href="css/bootstrap.css" type="text/css" rel="stylesheet" media="screen,projection"/> -->
  <link href="css/bootstrap.min.css" type="text/css" rel="stylesheet" media="screen,projection"/>
  <link href="css/font-awesome.min.css" type="text/css" rel="stylesheet" media="screen,projection"/>
  <link href="css/style.css" type="text/css" rel="stylesheet" media="screen,projection"/>
  <link href='https://fonts.googleapis.com/css?family=Roboto&subset=latin,cyrillic-ext,cyrillic' rel='stylesheet' type='text/css'>

</head>
<body>

<!--
            <p> </p><p> Getted values - : <textarea id="setKnobVal" rows="1" cols="10" name="text"></textarea></p> -->
    <div class="flex_container" style="height:50vh;">

<!-- ===================== FRONT ====================== -->
            <div class="flex_block" style="background-color: #deefef; flex: 0 0 590px; height:590px;margin-top:1em ">
  <!-- <div class="flex_svg-menu_container"  style=" padding:1em; background-color: #eee; width:100%; height:590px;"   float: left;> -->

            <!-- <div class=" flex_block " style=" flex: 0 1 590px; justify-content: flex-start; "> -->
<div style='position: absolute;'><!-- block for radial menus-->

<div  class="menu-wrapper" style=" left:1%;  "><!--  style="width:20em; height:20em; padding:-5em" -->

    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="-2 -2 504 252" id="menu" style="transform-origin: 50% 50% 0px; transform: matrix3d(-0.999997, 0.00242827, 0, 0, -0.00242827, -0.999997, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); touch-action: none; -webkit-user-select: none;">

    <g id="symbolsContainer">    <symbol class="icon icon-" id="icon-1" viewBox="0 0 39 39"><!--Replace the contents of this symbol with the content of your icon-->
    <!-- <rect fill="none" stroke="#bbb" stroke-width="1" width="100%" height="100%"></rect> -->
    <text fill="#222" x="50%" y="50%" dy=".3em" text-anchor="middle" font-size="2.02em">L</text></symbol>

        <symbol class="icon icon-" id="icon-2" viewBox="0 0 39 39"><!--Replace the contents of this symbol with the content of your icon-->
        <!-- <rect fill="none" stroke="#bbb" stroke-width="1" width="100%" height="100%"></rect> -->
        <text fill="#222" x="50%" y="50%" dy=".3em" text-anchor="middle" font-size="2.02em">|</text></symbol>

        <symbol class="icon icon-" id="icon-3" viewBox="0 0 39 39"><!--Replace the contents of this symbol with the content of your icon-->
        <!-- <rect fill="none" stroke="#bbb" stroke-width="1" width="100%" height="100%"></rect> -->
        <text fill="#222" x="50%" y="50%" dy=".3em" text-anchor="middle" font-size="2.02em">U</text></symbol>

    </g>
  <g id="itemsContainer">
    <g id="item-1" class='item' transform="matrix(1,0,0,1,0,0)" >
      <path    fill="coral" stroke="#111" d="M330,250 l170,0 A250,250 0 0,0 399.28964792569656,49.46920181123906 l-101.51696058947368,136.36094276835743 A80,80 0 0,1 330,250" class="sector"></path>
      <use xlink:href="#icon-1" width="69" height="69" x="374.5666198730469" y="135.61375427246094" transform="rotate(63.33333333333333 409.0666198730469 170.11375427246094)"></use>
    </g>

    <g id="item-2" class='item' transform="matrix(0.44879,-0.89363,0.89363,0.44879,-85.60795513096855,361.2083650307376)">
      <path fill="none" stroke="#111" d="M330,250 l170,0 A250,250 0 0,0 399.28964792569656,49.46920181123906 l-101.51696058947368,136.36094276835743 A80,80 0 0,1 330,250" class="sector"></path>
      <use xlink:href="#icon-2" width="69" height="69" x="374.5666198730469" y="135.61375427246094" transform="rotate(63.33333333333333 409.0666198730469 170.11375427246094)"></use>
    </g>
    <g id="item-3" class='item' transform="matrix(-0.59715,-0.80212,0.80212,-0.59715,198.7588497369357,599.8204461144576)" >
      <path fill="none" stroke="#111" d="M330,250 l170,0 A250,250 0 0,0 399.28964792569656,49.46920181123906 l-101.51696058947368,136.36094276835743 A80,80 0 0,1 330,250" class="sector"></path>
      <use xlink:href="#icon-3" width="69" height="69" x="374.5666198730469" y="135.61375427246094" transform="rotate(63.33333333333333 409.0666198730469 170.11375427246094)"></use>
    </g>
  </g>
  <defs><pattern x="0" y="0" width="10" height="10" patternUnits="userSpaceOnUse" id="Sik2qyck43" viewBox="0 0 10 10"><path d="M10-5-10,15M15,0,0,15M0-5-20,15" fill="none" stroke="BurlyWood" style="stroke-width: 5px;"></path></pattern></defs>

    <g id="trigger" class="trigger menu-trigger" role="button">
    <circle cx="250" cy="250" r="62" ></circle><!-- fill="url('#Sik2qyck43')"  -->
    <!-- <symbol class="icon icon-" id="icon-0" viewBox="0 0 39 39"></symbol> -->
<text  id="label" fill="#222" x="50%" y="50%" dy=".3em" text-anchor="middle" font-size="1.75em"  transform="translate(500, 380) rotate(180)">Тип</text>
    </g>
    </svg>
</div> <!-- end of menu-wrapper -->
</div> <!-- end block for radial menus-->
      <!--  </div > --><!-- end of flex svg-menu block -->

            <!-- <div class="flex_block" style=" padding:1em; flex: 0 0 590px; width:590px; height:590px;"> -->
            <!-- <div contenteditable="true" > -->
            <div id='frontViewWrapper' ><!-- //Farefox can get size only from parent div. -->
                  <svg id="frontView" class="flex_block"  width="590px"  height="590px" xmlns="http://www.w3.org/2000/svg" version="1.20"  xmlns:xlink="http://www.w3.org/1999/xlink" style='border: 1px solid #aaa'  viewBox="0 0 3000 3000">
                  </svg>
            </div ><!-- end of frontViewWrapper -->



            <!-- </div > --><!-- end of flex svg-menu container -->

 </div ><!-- ================================ end of FRONT ========================================================= -->

            <div class="flex_block" style="background-color: #eee; padding:1em; flex: 0 0 290px; height:290px">
              <p> </p>
                <svg id="svgout" class="flex_block"   width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" version="1.20"  xmlns:xlink="http://www.w3.org/1999/xlink" style='border: 1px solid #aaa' fill='green'  viewBox="0 0 3000 3000"><!-- preserveAspectRatio="xMinYMin meet" -->

                </svg>
            </div>

             <div class="flex_block" style="flex: 1 1 590px; background-color: #eee; opacity: 0.5; padding:1em;">
          <!-- <p>  Price table</p> -->
           <table id='priceTable' class="editableTable" style='width:40rem'>
             <tr>
              <th>&nbsp;</th><th>L, мм</th><th>W, мм</th><th>S, м.кв.</th><th>Цена,$</th>
             </tr>
             <!-- <tr><td>Столешница</td><td>43</td><td>51</td><td>79</td></tr> -->


        </table>




          </div >





     </div> <!-- end of flex_container -->

<!-- Define content -->
<!-- <div id="dimInputModal" class="popover "  > --> <!-- style='width:20rem' -->
 <!-- <div id="dimInputModal" class="modal fade"> -->
 <div id="WrappdimInputModal" class="modal fade bs-example-modal-sm" data-backdrop="false" data-keyboard="false" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true" >
  <div id="dimInputModal" class="modal-dialog  modal-sm">
        <div class="modal-content">

          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">X</button>
            <h4 class="modal-title">Задать размер</h4>
          </div>
        <div class="modal-body">
              <form class="form-horizontal add-new-page-form">
                <fieldset>
                  <input type="number" id='changeDim' min="100" max="750 "   onkeypress="return dontSubmit(event);"/><i class="fa fa-exclamation-circle" style='opacity:0; margin : 0.5rem 1rem; '></i>
                    <p>
                    </p>
                </fieldset>
            </form>
          </div>

          <div class="modal-footer">
            <button type="button" class="btn btn-default " data-dismiss="modal">Закрыть</button> 
            <button type="button" id="save-button"  class="btn btn-primary "  data-dismiss="modal">Сохранить изменения</button><!--type="submit"   -->
          </div>


        </div><!-- /.modal-content -->
      <!-- </div> -->
   </div> <!-- /.modal-dialog -->
</div><!-- /.modal -->
<!-- 
<p style="z-index:10; position:fixed; display:none" id="besideMouse">!!!!!!!!!</p>
 -->
  <!--  Scripts-->
  <script src="js/jquery-2.2.0.min.js"></script>
  <!--
  <script src="js/jquery-1.11.2.min.js"></script>
   -->

  <script src="js/bootstrap.min.js"></script>

  <!--
   <script src="js/bootstrap-editable.min.js"></script>
 -->
  <script src="js/snap.svg-min.js"></script>
<!--
  <script src="js/path-data-polyfill.js"></script>
   -->
  <script src="js/abacus.js"></script>
  <script src="js/saramenu.js"></script><!-- sara soueidan -->

  <script >//<![CDATA[

// $(document).ready(function(){
//   $(document).mousemove(function(e){
//      var cpos = { top: e.pageY + 10, left: e.pageX + 10 };
//      $('#besideMouse').offset(cpos);
//   });

// });

      $( document ).ready(function() {
        var nOfWings = $_GET('n');//n = 1, 2 . 0 - root table top, 1 , 2 - additinal wings
        // console.log(nOfWings );
        // console.log( $_GET('m') );//m = matireal
        initialisation({n : nOfWings,});
    });

document.querySelector('#item-1').addEventListener('click', function(){window.location.search = '&n=1';}, false);

document.querySelector('#item-2').addEventListener('click', function(){window.location.search = '&n=0';}, false);

document.querySelector('#item-3').addEventListener('click', function(){window.location.search = '&n=12';}, false);


document.querySelector('#changeDim').addEventListener('input', function(){ 
      var min=$(this).attr('min'), max=$(this).attr('max'), val=parseInt($(this).val()), exkl = $(this).parent().find('i');

     if (val < min || val > max) {console.log(val, min, max);
          $(this).css({color:'red'}); 
          exkl.css({opacity:1, color:'red'});
        } 
        else {console.log('input event',$(this).data());
          $(this).css({color:'black'}); 
          exkl.css({opacity:0, color:'red'});
        } 
      
    });

 $('#save-button').on('click', function(){
        console.log("save button pressed ")
       
    });

function dontSubmit (event)
{
   if (event.keyCode == 13) {
      console.log("enter pressed ")
      $('#save-button').trigger( "click" )
      return false;
   }
}

// $('#WrappdimInputModal')
// .modal({
//   // keyboard: false
// })
// .on('show.bs.modal', function (e) { console.log("modal show");
// });


//Get parameters from URL ...?n=1&m=...
function $_GET(key) {
  var s = window.location.search;
  s = s.match(new RegExp(key + '=([^&=]+)'));
  return s ? s[1] : false;
}


function callModall(target){
 console.log(target);
//  console.log(wholeTable.limits[0]);
  var vaL = wholeTable.S[target.data4][target.data2],
      maxLim = wholeTable.S[target.data4].limits[target.data2+'max'],
      minLim = wholeTable.S[target.data4].limits[target.data2+'min'];
      $( "#WrappdimInputModal" ).find('p').html( 'Ограничение: от '+minLim+' до '+maxLim+' мм' );
    $( "#WrappdimInputModal" )
      .modal({keyboard : true})
      .on('shown.bs.modal', function (e) {var that = $( "#WrappdimInputModal" ).find('input');
        that.data('input2target',target);
        that.data(target)
            .attr({
               "max" : maxLim,       
               "min" : minLim         
            });
        that.val(vaL).focus().select();
      })

      .on('hide.bs.modal', function (e) {var that = $( "#WrappdimInputModal" ).find('input');
        // console.log('hide event',$(this).val())
        var  target_ = that.data('input2target');
        // console.log(target_);
        // console.log(that.val());
        wholeTable.S[target_.data4].setSize(parseInt( that.val() ), target_.data2);//set size with checking limits
        $('#'+target_.data4+target_.data2).text(wholeTable.S[target_.data4][target_.data2]).parent().find("td:eq(3)").text(wholeTable.S[target_.data4].S);
        // wholeTable.S[target.data4][target.data2] = that.val();

        redraw_mainCountur();
      })
      ;
  return true
}


  $( document ).ready(function() {
    $('.editableTable').find('[data-editable="1"]').click(function() {
      var target = {
        data2 : $(this).data('2'),
        data4 : $(this).data('4'),
      }
      // console.dir(target);
    if (callModall(target)) {return} // successfull modal working
      //else changing by tablice cells
            console.dir('changing by tablice cells');
            // edit text in cells
            var OriginalContent = $(this).text();
            $(this).addClass("cellEditing");
            $(this).html("<input type='number' min='0' value='" + OriginalContent + "' />");
            $(this).children().first().focus();
            $(this).children().first().keypress(function (e) {
                if (e.which == 13) {
                    var newContent = $(this).val();
                    $(this).parent().text(newContent);
                    // console.log(this);
                    wholeTable.S[target.data4][target.data2] = parseInt(newContent);
                    // $(this).parent().find("td:eq(3)").text(wholeTable.S[1].S);
                    $("#"+target.data4+"S").text(wholeTable.S[target.data4].S);
                    console.log(wholeTable.S[target.data4].S);
                    redraw_mainCountur();
                    $(this).parent().removeClass("cellEditing");


                }
            });
        $(this).children().first().blur(function(){
            $(this).parent().text(OriginalContent);
            $(this).parent().removeClass("cellEditing");
        });
            $(this).find('input').click(function(e){
                e.stopPropagation();
            });
        }
        )

});//]]>

  </script>

  <script type='text/javascript'>//<![CDATA[

function centring(svgId, divId) {//centring DIM modal on frontSVG
            //Farefox can get size only from parent div.
      var   viewPort={w : document.getElementById(svgId).clientWidth || document.getElementById(svgId).parentNode.clientWidth,
                      h : document.getElementById(svgId).clientHeight || document.getElementById(svgId).parentNode.clientHeight };
   $('#'+divId).css({
          position:'absolute',
          // left : ($(document).width()-viewPort.w)*0.5+(viewPort.w - $('#'+divId).outerWidth())/2,
          left : (viewPort.w - $('#'+divId).outerWidth())/2,
           top : (viewPort.h - $('#'+divId).outerHeight())/2,
        });
};

      $(window).resize(function(){
       centring('frontView', 'dimInputModal');
      $(window).resize(); //Железобетонно центрируем таблицу
    }, 1000);


$( document ).ready(function() {

        centring('frontView', 'dimInputModal');

            $("svg text").tooltip({
                'container': 'body',
                'placement': 'right'
            });
});//]]>

  </script>




</body>
</html>
<!-- ================================
Free for hire
Skype: zababurinalex;
Emails:  852gin@gmail.com, alexei.zababurin@gmail.com
Phone number:+38(050)800-5770
 ===================================== -->